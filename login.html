<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<title>ç”¨æˆ·ç™»å½•</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script>
    tailwind.config = {
        theme: {
            extend: {
                colors: {
                    primary: '#4CAF50',
                    secondary: '#8D6E63',
                    accent: '#FFD700',
                    light: '#F5F5DC',
                    dark: '#5D4037'
                },
                fontFamily: {
                    rustic: ['"Comic Sans MS"', 'cursive', 'sans-serif'],
                },
            }
        }
    }
</script>
<style type="text/tailwindcss">
    @layer utilities {
        .content-auto {
            content-visibility: auto;
        }
        .field-shadow {
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .btn-hover {
            @apply transition-all duration-300 transform hover:scale-105 hover:shadow-lg;
        }
        .bg-pattern {
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%239C92AC' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        .form-transition {
            @apply transition-all duration-300 ease-in-out;
        }
    }
</style>
</head>
<body class="min-h-screen bg-light bg-pattern font-rustic">
    <!-- é¡¶éƒ¨è£…é¥° -->
    <div class="absolute top-0 left-0 w-full h-20 bg-gradient-to-r from-primary/80 to-primary/40"></div>
    
    <!-- é¡µé¢å®¹å™¨ -->
    <div class="container mx-auto px-4 py-24 relative z-10">
        <!-- è£…é¥°å…ƒç´  -->
        <div class="absolute -top-10 -right-10 w-20 h-20 bg-accent/20 rounded-full blur-xl"></div>
        <div class="absolute -bottom-10 -left-10 w-32 h-32 bg-primary/10 rounded-full blur-xl"></div>
        
        <!-- ä¸»å†…å®¹åŒº -->
        <div class="max-w-md mx-auto bg-white rounded-2xl shadow-xl overflow-hidden relative">
            <!-- ç”°å›­é£æ ¼é¡¶éƒ¨ -->
            <div class="bg-primary h-24 relative">
                <div class="absolute inset-0 bg-gradient-to-r from-primary/90 to-primary/70 flex items-center justify-center">
                    <h2 class="text-white text-2xl font-bold">ç”¨æˆ·ç™»å½•</h2>
                </div>
                <!-- è£…é¥°æ€§æ¤ç‰©å…ƒç´  -->
                <div class="absolute -bottom-8 left-1/2 transform -translate-x-1/2 w-16 h-16 bg-white rounded-full flex items-center justify-center shadow-lg text-3xl select-none">
                    ğŸ¥¬
                </div>
            </div>
            
            <!-- è¡¨å•åŒºåŸŸ -->
            <div class="p-8 pt-16">
                <form id="loginForm" class="space-y-6">
                    <div class="form-group form-transition">
                        <label for="username" class="block text-dark text-sm font-medium mb-2">
                            <i class="fa fa-user-circle mr-2 text-primary"></i>ç”¨æˆ·å
                        </label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fa fa-user text-gray-400"></i>
                            </div>
                            <input type="text" id="username" name="username" required 
                                class="w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 focus:border-primary focus:ring-2 focus:ring-primary/20 field-shadow form-transition"
                                placeholder="è¯·è¾“å…¥ç”¨æˆ·å">
                        </div>
                    </div>
                    
                    <div class="form-group form-transition">
                        <label for="password" class="block text-dark text-sm font-medium mb-2">
                            <i class="fa fa-lock mr-2 text-primary"></i>å¯†ç 
                        </label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fa fa-lock text-gray-400"></i>
                            </div>
                            <input type="password" id="password" name="password" required 
                                class="w-full pl-10 pr-10 py-3 rounded-lg border border-gray-300 focus:border-primary focus:ring-2 focus:ring-primary/20 field-shadow form-transition"
                                placeholder="è¯·è¾“å…¥å¯†ç ">
                            <button type="button" id="togglePassword" class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-primary form-transition">
                                <i class="fa fa-eye-slash"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <button type="submit" 
                            class="w-full bg-primary hover:bg-primary/90 text-white font-medium py-3 px-4 rounded-lg shadow-md btn-hover flex items-center justify-center">
                            <i class="fa fa-sign-in mr-2"></i>ç™»å½•
                        </button>
                    </div>
                    
                    <div class="flex items-center justify-between text-sm text-gray-600">
                        <a href="reg.html" class="text-primary hover:text-primary/80 form-transition flex items-center">
                            <i class="fa fa-user-plus mr-1"></i> æ³¨å†Œè´¦å·
                        </a>
                        <a href="forget.html" class="text-primary hover:text-primary/80 form-transition flex items-center">
                            <i class="fa fa-question-circle mr-1"></i> å¿˜è®°å¯†ç 
                        </a>
                    </div>
                    
                    <div class="msg text-center text-red-500 mt-4" id="msg"></div>
                </form>
            </div>
            
            <!-- åº•éƒ¨è£…é¥° -->
            <div class="h-4 bg-gradient-to-r from-primary/30 to-primary/10 rounded-b-2xl"></div>
        </div>
        
        <!-- é¡µè„š -->
        <!-- <footer class="mt-12 text-center text-gray-500 text-sm">
            <p>Â© 2025 ç”°å›­ç”Ÿæ´» Â· <a href="#" class="text-primary hover:underline">éšç§æ”¿ç­–</a> Â· <a href="#" class="text-primary hover:underline">æœåŠ¡æ¡æ¬¾</a></p>
        </footer> -->
    </div>
    
    <!-- æµ®åŠ¨è£…é¥°å…ƒç´  -->
    <div class="absolute top-1/4 left-10 w-12 h-12 bg-accent/20 rounded-full animate-pulse"></div>
    <div class="absolute bottom-1/3 right-10 w-8 h-8 bg-primary/20 rounded-full animate-pulse" style="animation-delay: 1s;"></div>
    <div class="absolute top-1/2 left-1/4 w-6 h-6 bg-secondary/20 rounded-full animate-pulse" style="animation-delay: 2s;"></div>

<script>
    // å¯†ç æ˜¾ç¤º/éšè—åˆ‡æ¢
    document.getElementById('togglePassword').addEventListener('click', function() {
        const passwordInput = document.getElementById('password');
        const icon = this.querySelector('i');
        
        if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            icon.classList.remove('fa-eye-slash');
            icon.classList.add('fa-eye');
        } else {
            passwordInput.type = 'password';
            icon.classList.remove('fa-eye');
            icon.classList.add('fa-eye-slash');
        }
    });
    
    // è¡¨å•æäº¤å¤„ç†
    document.getElementById('loginForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        // æ·»åŠ è¡¨å•æäº¤åŠ¨ç”»
        const formGroups = document.querySelectorAll('.form-group');
        formGroups.forEach(group => group.classList.add('opacity-50'));
        
        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;
        const msg = document.getElementById('msg');
        
        msg.textContent = '';
        msg.classList.remove('animate-bounce');
        
        // æ¨¡æ‹Ÿç™»å½•è¯·æ±‚
        setTimeout(() => {
            fetch('http://127.0.0.1:5000/login', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({username, password})
            })
            .then(res => {
                if (!res.ok) throw new Error('æœåŠ¡å™¨å“åº”é”™è¯¯');
                return res.json();
            })
            .then(data => {
                if(data.success) {
                    // ç™»å½•æˆåŠŸåŠ¨ç”»
                    const container = document.querySelector('.container');
                    container.classList.add('opacity-0');
                    setTimeout(() => {
                        window.location.href = 'success.html';
                    }, 500);
                } else {
                    msg.textContent = 'ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç”¨æˆ·åæˆ–å¯†ç ';
                    msg.classList.add('animate-bounce');
                }
            })
            .catch(() => {
                msg.textContent = 'æ— æ³•è¿æ¥æœåŠ¡å™¨ï¼Œè¯·ç¨åé‡è¯•';
                msg.classList.add('animate-bounce');
            })
            .finally(() => {
                formGroups.forEach(group => group.classList.remove('opacity-50'));
            });
        }, 800);
    });
    
    // è¡¨å•å…ƒç´ åŠ¨ç”»
    const inputs = document.querySelectorAll('input');
    inputs.forEach(input => {
        input.addEventListener('focus', function() {
            this.parentElement.parentElement.classList.add('scale-[1.02]');
        });
        input.addEventListener('blur', function() {
            this.parentElement.parentElement.classList.remove('scale-[1.02]');
        });
    });
</script>
</body>
</html>
